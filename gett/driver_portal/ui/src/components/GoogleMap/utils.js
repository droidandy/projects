/* global google */

import isArray from 'lodash/isArray'
import isPlainObject from 'lodash/isPlainObject'
// import startIcon from 'images/start_marker_icon.png'
// import finishIcon from 'images/finish_marker_icon.png'

const driverStatuses = ['start', 'finish']

export function toLatLng(lat, lng) {
  if (isArray(lat)) {
    [lat, lng] = lat
  } else if (isPlainObject(lat)) {
    lng = lat.lng
    lat = lat.lat
  }

  return new google.maps.LatLng(lat, lng)
}

export function getMarkerIcon(type) {
  const icon = {}

  if (~Object.keys(driverStatuses).indexOf(type.toString())) {
    icon.url = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
         <path fill="#6BC11A" d="M9.99956987,0 C6.13954774,0 3,3.12640528 3,6.97059894 C3,10.6897364 6.78689935,16.0907086 8.60765638,18.6864815 C8.86745729,19.0573674 9.07607226,19.3537335 9.24038343,19.596137 C9.4046946,19.839397 9.68342141,20 10,20 C10.3165786,20 10.5953054,19.839397 10.7596166,19.596137 C10.9239277,19.3537335 11.1321126,19.0573674 11.3923436,18.685625 C13.2131007,16.0902803 17,10.6893081 17,6.97059894 C16.9991397,3.12640528 13.859592,0 9.99956987,0 Z M9.99956987,9.51583546 C8.59088116,9.51583546 7.4424235,8.37319857 7.4424235,6.97102722 C7.4424235,5.56757104 8.59088116,4.4257907 9.99956987,4.4257907 C11.4104092,4.4257907 12.5567162,5.56757104 12.5567162,6.97102722 C12.5567162,8.37319857 11.4104092,9.51583546 9.99956987,9.51583546 Z"/>
      </svg>
    `)
    icon.anchor = [15, 15]
  } else if (type === 'start') {
    icon.url = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
        <path fill="#6BC11A" d="M9.99956987,0 C6.13954774,0 3,3.12640528 3,6.97059894 C3,10.6897364 6.78689935,16.0907086 8.60765638,18.6864815 C8.86745729,19.0573674 9.07607226,19.3537335 9.24038343,19.596137 C9.4046946,19.839397 9.68342141,20 10,20 C10.3165786,20 10.5953054,19.839397 10.7596166,19.596137 C10.9239277,19.3537335 11.1321126,19.0573674 11.3923436,18.685625 C13.2131007,16.0902803 17,10.6893081 17,6.97059894 C16.9991397,3.12640528 13.859592,0 9.99956987,0 Z M9.99956987,9.51583546 C8.59088116,9.51583546 7.4424235,8.37319857 7.4424235,6.97102722 C7.4424235,5.56757104 8.59088116,4.4257907 9.99956987,4.4257907 C11.4104092,4.4257907 12.5567162,5.56757104 12.5567162,6.97102722 C12.5567162,8.37319857 11.4104092,9.51583546 9.99956987,9.51583546 Z"/>
      </svg>
    `)
    icon.anchor = [15, 29]
  } else if (type === 'finish') {
    icon.url = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
        <path fill="#F00" d="M9.99956987,0 C6.13954774,0 3,3.12640528 3,6.97059894 C3,10.6897364 6.78689935,16.0907086 8.60765638,18.6864815 C8.86745729,19.0573674 9.07607226,19.3537335 9.24038343,19.596137 C9.4046946,19.839397 9.68342141,20 10,20 C10.3165786,20 10.5953054,19.839397 10.7596166,19.596137 C10.9239277,19.3537335 11.1321126,19.0573674 11.3923436,18.685625 C13.2131007,16.0902803 17,10.6893081 17,6.97059894 C16.9991397,3.12640528 13.859592,0 9.99956987,0 Z M9.99956987,9.51583546 C8.59088116,9.51583546 7.4424235,8.37319857 7.4424235,6.97102722 C7.4424235,5.56757104 8.59088116,4.4257907 9.99956987,4.4257907 C11.4104092,4.4257907 12.5567162,5.56757104 12.5567162,6.97102722 C12.5567162,8.37319857 11.4104092,9.51583546 9.99956987,9.51583546 Z"/>
      </svg>
    `)
    icon.anchor = [15, 29]
  }

  icon.scaledSize = [30, 30]

  return {
    url: icon.url,
    anchor: new google.maps.Point(...icon.anchor),
    scaledSize: new google.maps.Size(...icon.scaledSize)
  }
}
